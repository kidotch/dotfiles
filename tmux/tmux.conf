# ==================================================
# 基本設定
# ==================================================
set -s escape-time 10
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
set -g set-titles on
set -g set-titles-string "tmux"
set -g mouse on
set -g allow-passthrough on

# ==================================================
# ステータスバー
# ==================================================
set -g status-left-length 16
set -g status-left '#{?client_prefix,#[fg=black]#[bg=yellow][prefix ON!],#[fg=cyan]#[bg=#303030][prefix OFF]}#[default]'

# ==================================================
# ペイン表示
# ==================================================
# 枠線スタイル
set -g pane-border-style 'fg=colour238'
set -g pane-active-border-style 'fg=colour45,bold'
set -g pane-border-lines double

# 枠線に情報表示
set -g pane-border-status top
set -g pane-border-format ' #{pane_index}: #{pane_current_command} '

# ペイン番号表示 (prefix + q)
set -g display-panes-time 2000
set -g display-panes-colour colour240
set -g display-panes-active-colour colour45

# 非アクティブペインを暗くする (無効)
#set -g window-style 'fg=colour250,bg=colour235'
#set -g window-active-style 'fg=colour255,bg=terminal'

# ==================================================
# コピーモード
# ==================================================
setw -g mode-keys vi
set -g set-clipboard on

# v/Space で選択開始、y でシステムクリップボードへコピー
bind -T copy-mode-vi v     send-keys -X begin-selection
bind -T copy-mode-vi Space send-keys -X begin-selection
bind -T copy-mode-vi y     send-keys -X copy-pipe-and-cancel "win32yank.exe -i"

# ==================================================
# キーバインド (prefix なし)
# ==================================================
# ペイン移動: Alt+Shift+H/J/K/L
bind -n M-H select-pane -L
bind -n M-L select-pane -R
bind -n M-K select-pane -U
bind -n M-J select-pane -D

# ペイン順次切り替え: Alt+Shift+O / Alt+Shift+I
bind -n M-o select-pane -t :.+
bind -n M-O select-pane -t :.-

# ペイン分割: Alt+Shift+%/"
bind -n 'M-%' split-window -h -c "#{pane_current_path}"
bind -n 'M-"' split-window -v -c "#{pane_current_path}"

# コピーモード: Alt+Shift+Z
bind -n M-Z copy-mode

# スクロール: Alt+U/D (1行), Ctrl+Alt+U/D (半ページ), Alt+PgUp/PgDn (1ページ)
bind -n M-u copy-mode \; send-keys -X scroll-up
bind -n M-d copy-mode \; send-keys -X scroll-down
bind -n C-M-u copy-mode \; send-keys -X halfpage-up
bind -n C-M-d copy-mode \; send-keys -X halfpage-down
bind -n M-PPage copy-mode \; send-keys -X page-up
bind -n M-NPage copy-mode \; send-keys -X page-down

# デタッチ: Ctrl+Alt+Shift+D
# bind -n C-M-d detach-client
